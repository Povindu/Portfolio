---
import MainLayout from '@/layouts/MainLayout.astro';
import ProjectCard from '@/components/ProjectCard.astro';
import { sanityClient } from '@/lib/sanity';
import type { DevProject } from '@/lib/sanity.types'; 

// Fetch Query
const query = `*[_type == "devProject"] | order(_createdAt desc) {
  title,
  subtitle,
  slug,
  summary,
  techStack
}`;

const projects = await sanityClient.fetch<DevProject[]>(query);
---

<MainLayout title="Povindu | Software Engineer" description="My engineering portfolio">
  
  <header class="mb-16 space-y-6">
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-50 dark:bg-blue-950 text-blue-700 dark:text-blue-300 text-xs font-semibold tracking-wide uppercase">
      <span class="w-2 h-2 rounded-full bg-blue-600 dark:bg-blue-400 animate-pulse"></span>
      Available for Hire
    </div>
    
    <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight text-foreground">
      Engineering <span class="text-blue-600 dark:text-blue-400">Solutions</span>
      <br class="hidden md:block" />
      that Scale.
    </h1>
    
    <p class="text-lg text-muted-foreground max-w-2xl leading-relaxed">
      I don't just write code; I build systems. Specialized in 
      <strong class="text-foreground">.NET Architecture</strong> and 
      <strong class="text-foreground">Modern Web Performance</strong>.
    </p>

    <div class="flex gap-4 pt-4">
      <a href="#projects" class="px-6 py-3 bg-primary text-primary-foreground font-medium rounded-lg hover:bg-primary/90 transition">
        View Work
      </a>
      <a href="/resume" class="px-6 py-3 border border-border text-foreground font-medium rounded-lg hover:bg-accent transition">
        Download CV
      </a>
    </div>
  </header>

  <section id="projects" class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
    {projects.map((project) => (
      <ProjectCard project={project} />
    ))}
  </section>

</MainLayout>